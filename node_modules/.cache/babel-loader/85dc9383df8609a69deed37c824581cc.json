{"ast":null,"code":"\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = exports.InjectedEvents = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _wrapNativeSuper2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/wrapNativeSuper\"));\n\nvar _freeze = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/freeze\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _AbstractWeb3Connector = _interopRequireDefault(require(\"./AbstractWeb3Connector\"));\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nvar _verifyChainId = _interopRequireDefault(require(\"../utils/verifyChainId\"));\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar InjectedEvents = (0, _freeze.default)({\n  ACCOUNTS_CHANGED: 'accountsChanged',\n  CHAIN_CHANGED: 'chainChanged',\n  CONNECT: 'connect',\n  DISCONNECT: 'disconnect'\n});\nexports.InjectedEvents = InjectedEvents;\n\nvar NoEthereumProviderError = /*#__PURE__*/function (_Error) {\n  (0, _inherits2.default)(NoEthereumProviderError, _Error);\n\n  var _super = _createSuper(NoEthereumProviderError);\n\n  function NoEthereumProviderError() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, NoEthereumProviderError);\n    _this = _super.call(this);\n    _this.message = 'Non ethereum enabled browser';\n    return _this;\n  }\n\n  return (0, _createClass2.default)(NoEthereumProviderError);\n}( /*#__PURE__*/(0, _wrapNativeSuper2.default)(Error));\n/**\n * Connector to connect an injected provider (like Metamask) to Moralis\n * The provider should be injected in window.ethereum\n */\n\n\nvar InjectedWeb3Connector = /*#__PURE__*/function (_AbstractWeb3Connecto) {\n  (0, _inherits2.default)(InjectedWeb3Connector, _AbstractWeb3Connecto);\n\n  var _super2 = _createSuper(InjectedWeb3Connector);\n\n  function InjectedWeb3Connector() {\n    var _context;\n\n    var _this2;\n\n    (0, _classCallCheck2.default)(this, InjectedWeb3Connector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _super2.call.apply(_super2, (0, _concat.default)(_context = [this]).call(_context, args));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this2), \"type\", 'injected');\n    return _this2;\n  }\n\n  (0, _createClass2.default)(InjectedWeb3Connector, [{\n    key: \"verifyEthereumBrowser\",\n    value: function value() {\n      var _window;\n\n      if (!((_window = window) !== null && _window !== void 0 && _window.ethereum)) {\n        throw new NoEthereumProviderError();\n      }\n    }\n  }, {\n    key: \"activate\",\n    value: function () {\n      var _activate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var _yield$Promise$all, _yield$Promise$all2, accounts, chainId, account, provider;\n\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.verifyEthereumBrowser();\n                _context2.next = 3;\n                return _promise.default.all([window.ethereum.request({\n                  method: 'eth_requestAccounts'\n                }), window.ethereum.request({\n                  method: 'eth_chainId'\n                })]);\n\n              case 3:\n                _yield$Promise$all = _context2.sent;\n                _yield$Promise$all2 = (0, _slicedToArray2.default)(_yield$Promise$all, 2);\n                accounts = _yield$Promise$all2[0];\n                chainId = _yield$Promise$all2[1];\n                account = accounts[0] ? accounts[0].toLowerCase() : null;\n                provider = window.ethereum;\n                this.chainId = chainId;\n                this.account = account;\n                this.provider = provider;\n                this.subscribeToEvents(provider);\n                return _context2.abrupt(\"return\", {\n                  provider: provider,\n                  chainId: chainId,\n                  account: account\n                });\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function () {\n        return _activate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"switchNetwork\",\n    value: function () {\n      var _switchNetwork = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(chainId) {\n        var currentNetwork;\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.verifyEthereumBrowser();\n                chainId = (0, _verifyChainId.default)(chainId);\n                currentNetwork = this.chainId;\n\n                if (!(currentNetwork === chainId)) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 5:\n                _context3.next = 7;\n                return window.ethereum.request({\n                  method: 'wallet_switchEthereumChain',\n                  params: [{\n                    chainId: chainId\n                  }]\n                });\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _switchNetwork.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"addNetwork\",\n    value: function () {\n      var _addNetwork = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(chainId, chainName, currencyName, currencySymbol, rpcUrl, blockExplorerUrl) {\n        var newchainId;\n        return _regenerator.default.wrap(function (_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.verifyEthereumBrowser();\n                newchainId = (0, _verifyChainId.default)(chainId);\n                _context4.next = 4;\n                return window.ethereum.request({\n                  method: 'wallet_addEthereumChain',\n                  params: [{\n                    chainId: newchainId,\n                    chainName: chainName,\n                    nativeCurrency: {\n                      name: currencyName,\n                      symbol: currencySymbol,\n                      decimals: 18\n                    },\n                    rpcUrls: [rpcUrl],\n                    blockExplorerUrls: blockExplorerUrl ? [blockExplorerUrl] : null\n                  }]\n                });\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function () {\n        return _addNetwork.apply(this, arguments);\n      };\n    }()\n  }]);\n  return InjectedWeb3Connector;\n}(_AbstractWeb3Connector.default);\n\nvar _default = InjectedWeb3Connector;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}